<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🎵</text></svg>">
    <title>Sound-Responsive Fireworks with Custom Images</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/image-uploader.css">
    <link rel="stylesheet" href="css/background-uploader.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/control-panel-simplified.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/uploaders.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/mobile-responsive.css">
    <link rel="stylesheet" href="css/presets.css">
    
</head>
<body>
    <!-- FINAL FIX: Animation canvas must be transparent -->
    <canvas id="backgroundCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none;"></canvas>
    <canvas id="animationCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; pointer-events: none; background: transparent;"></canvas>
    


    <div class="app-container" style="z-index: 10; background: transparent !important;">
        <!-- Control Panel -->
        <div class="control-panel">
            <button id="startMicrophone" class="mic-button">
                <span class="icon">🎤</span>
                <span class="text" data-i18n="ui.buttons.start">Start</span>
            </button>
            
            <button id="testFirework" class="test-button">
                <span class="icon">⚡</span>
                <span class="text" data-i18n="ui.buttons.test">Test</span>
            </button>
            
            <!-- Mode Toggle Button (moved before settings) -->
            <button id="modeToggleButton" class="mode-toggle-control-button">
                <span class="icon">🎆</span>
                <span class="text" data-i18n="ui.modes.fireworks">Fireworks</span>
            </button>
            
            <button id="toggleSettings">
                <span class="icon">⚙️</span>
                <span class="text" data-i18n="ui.buttons.settings">Settings</span>
            </button>
            
            <button id="togglePanels">
                <span class="icon">👁️</span>
                <span class="text" data-i18n="ui.buttons.hide">Hide</span>
            </button>
        </div>
        
        <!-- Language Switcher Dropdown -->
        <div class="language-switcher-dropdown">
            <button class="language-switcher-button" id="languageSwitcherButton" aria-haspopup="true" aria-expanded="false" title="Select interface language">
                <span class="language-icon">🌐</span>
                <span class="current-language-text" data-i18n="ui.language.selector">Language</span>
                <span class="dropdown-arrow">▼</span>
            </button>
            <div class="language-dropdown-menu" id="languageDropdownMenu">
                <div class="language-option active" data-language="en">
                    <span class="language-flag">🇺🇸</span>
                    <span class="language-text" data-i18n="ui.language.english">English</span>
                </div>
                <div class="language-option" data-language="ja">
                    <span class="language-flag">🇯🇵</span>
                    <span class="language-text" data-i18n="ui.language.japanese">日本語</span>
                </div>
                <div class="language-option" data-language="zh-cn">
                    <span class="language-flag">🇨🇳</span>
                    <span class="language-text" data-i18n="ui.language.chineseSimplified">简体中文</span>
                </div>
                <div class="language-option" data-language="zh-tw">
                    <span class="language-flag">🇹🇼</span>
                    <span class="language-text" data-i18n="ui.language.chineseTraditional">繁體中文</span>
                </div>
            </div>
        </div>
        
        <!-- Audio Visualizer -->
        <div class="audio-visualizer">
            <div id="volumeLevel" class="volume-meter">
                <div class="level-bar"></div>
            </div>
            <div class="mic-test">
                <p data-i18n="audio.instructions.main">Make LOUDER, SUSTAINED sounds to launch animations. Keep making sound to keep them rising. VERY LOUD sounds will trigger all active animations! 🔊</p>
                <div id="audioStatusDetection" class="audio-status-detection" data-i18n="audio.status.inactive">Audio status: inactive</div>
            </div>
        </div>
        
        <!-- Tabbed Uploader Interface -->
        <div class="uploader-tabs-container">
            <div class="uploader-tab-navigation">
                <button class="uploader-tab-button active" data-uploader-tab="firework" data-i18n="ui.tabs.animationImages">Animation Images</button>
                <button class="uploader-tab-button" data-uploader-tab="background" data-i18n="ui.tabs.background">Background</button>
                <button class="uploader-tab-button" data-uploader-tab="presets" data-i18n="ui.tabs.presets">Presets</button>
            </div>
            
            <div class="uploader-tab-content">
                <div class="uploader-tab-pane active" id="firework-tab">
                    <div class="image-upload-container">
                        <div class="upload-area" id="dropZone">
                            <input type="file" id="fileInput" accept="image/jpeg,image/jpg,image/png,image/webp" multiple style="display: none;">
                            <div class="upload-content">
                                <p data-i18n="upload.instructions.dragDrop">Drag and drop custom images here</p>
                                <button id="selectFiles" class="button" data-i18n="upload.buttons.selectFiles">Select Files</button>
                                <p class="file-types" data-i18n="upload.instructions.fileTypes">Supported: JPG, PNG, WebP (max 5MB)</p>
                                <p class="file-description" data-i18n="upload.instructions.imageDescription">Images will appear during firework explosions and bubble pops</p>
                            </div>
                        </div>
                        <div class="preview-container" id="previewContainer"></div>
                    </div>
                </div>
                
                <div class="uploader-tab-pane" id="background-tab">
                    <div class="image-upload-container">
                        <div class="upload-area" id="bgDropZone">
                            <input type="file" id="bgFileInput" accept="image/*,video/*" multiple style="display: none;">
                            <div class="upload-content">
                                <p data-i18n="upload.instructions.dragDropMedia">Drag and drop background images & videos here</p>
                                <button id="selectBgFiles" class="button" data-i18n="upload.buttons.selectFiles">Select Files</button>
                                <p class="file-types" data-i18n="upload.instructions.mediaTypes">Supported: Images (JPG, PNG, GIF, WebP) & Videos (MP4, WebM) • Max 100MB</p>
                                <p class="file-description" data-i18n="upload.instructions.backgroundDescription">Media will cycle as animated backgrounds behind your animations</p>
                            </div>
                        </div>
                        
                        <div class="preview-container" id="bgPreviewContainer"></div>
                    </div>
                </div>
                
                <div class="uploader-tab-pane" id="presets-tab">
                    <div class="preset-container">
                        <div class="preset-actions">
                            <button id="discoverPresets" class="button" data-i18n="presets.actions.discover">🔍 Discover Presets</button>
                            <button id="loadExternalPreset" class="button" data-i18n="presets.actions.loadFolder">📁 Load Preset Folder</button>
                            <button id="clearAllImages" class="button secondary" data-i18n="presets.actions.clearAll">🗑️ Clear All</button>
                        </div>
                        
                        <div class="preset-sections">
                            <!-- Empty state shown initially -->
                            <div id="presetEmptyState" class="preset-empty-state">
                                <div class="empty-state-content">
                                    <div class="empty-state-icon">📦</div>
                                    <h4 data-i18n="presets.messages.noPresets">No Presets Loaded</h4>
                                    <p data-i18n="presets.messages.discoverInstructions">Click "Discover Presets" to scan your /presets/ folder and find available preset collections.</p>
                                </div>
                            </div>
                            
                            <!-- Built-in Presets Section (hidden initially) -->
                            <div class="preset-section" id="defaultPresetsSection" style="display: none;">
                                <h4 data-i18n="presets.sections.discovered">📦 Discovered Presets</h4>
                                <div id="defaultPresetsContainer" class="presets-grid">
                                    <!-- Discovered presets will be populated here -->
                                </div>
                            </div>
                            
                            <!-- External Presets Section -->
                            <div class="preset-section" id="externalPresetsSection" style="display: none;">
                                <h4 data-i18n="presets.sections.loaded">📁 Loaded Presets</h4>
                                <div id="externalPresetsContainer" class="presets-grid">
                                    <!-- External presets will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings panel with tabs -->
    <div id="settingsPanel" class="settings-panel" style="display: none;">
        <h2 data-i18n="settings.title">Animation Settings</h2>
        
        <!-- Tab Navigation -->
        <div class="tab-navigation" role="tablist">
            <button class="tab-button" data-tab="audio" role="tab" data-i18n="settings.tabs.audio">🎤 Audio</button>
            <button class="tab-button" data-tab="fireworks" role="tab" data-i18n="settings.tabs.fireworks">🎆 Fireworks</button>
            <button class="tab-button" data-tab="bubbles" role="tab" data-i18n="settings.tabs.bubbles">🫧 Bubbles</button>
            <button class="tab-button" data-tab="effects" role="tab" data-i18n="settings.tabs.effects">✨ Effects</button>
            <button class="tab-button" data-tab="images" role="tab" data-i18n="settings.tabs.images">🖼️ Images</button>
            <button class="tab-button" data-tab="colors" role="tab" data-i18n="settings.tabs.colors">🎨 Colors</button>
        </div>
        
        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Audio & Sound Tab Pane -->
            <div class="tab-pane" id="audio-tab" data-tab-content="audio">
                <h4 data-i18n="settings.audio.title">🎤 Audio & Sound Settings</h4>
                <div class="setting">
                    <label for="sensitivitySlider" data-i18n="settings.audio.microphoneSensitivity">Microphone Sensitivity: <span id="sensitivityValue">2.0</span></label>
                    <input type="range" id="sensitivitySlider" min="0.5" max="4" step="0.1" value="2.0">
                    <p class="setting-description" data-i18n="settings.audio.microphoneSensitivityDesc">How sensitive the microphone is to your voice and sounds.</p>
                </div>
                <div class="setting">
                    <label for="thresholdLow" data-i18n="settings.audio.launchSensitivity">Launch Sensitivity: <span id="thresholdLowValue">0.08</span></label>
                    <input type="range" id="thresholdLow" min="0.02" max="0.2" step="0.01" value="0.08">
                    <p class="setting-description" data-i18n="settings.audio.launchSensitivityDesc">How quiet your voice can be to still launch fireworks.</p>
                </div>
                <div class="setting">
                    <label for="thresholdHigh" data-i18n="settings.audio.burstSensitivity">Burst Sensitivity: <span id="thresholdHighValue">0.18</span></label>
                    <input type="range" id="thresholdHigh" min="0.1" max="1" step="0.05" value="0.18">
                    <p class="setting-description" data-i18n="settings.audio.burstSensitivityDesc">How loud you need to be to explode all bubbles at once.</p>
                </div>
                <div class="setting">
                    <label for="suddenThreshold" data-i18n="settings.audio.quickResponse">Quick Response: <span id="suddenThresholdValue">0.12</span></label>
                    <input type="range" id="suddenThreshold" min="0.05" max="0.3" step="0.01" value="0.12">
                    <p class="setting-description" data-i18n="settings.audio.quickResponseDesc">How quickly the app responds to sudden sounds.</p>
                </div>
                <div class="setting toggle-setting">
                    <label for="testSoundEnabled" data-i18n="settings.audio.testSounds">Test Animation Sounds:</label>
                    <label class="switch">
                        <input type="checkbox" id="testSoundEnabled" checked>
                        <span class="slider round"></span>
                    </label>
                    <p class="setting-description" data-i18n="settings.audio.testSoundsDesc">Play realistic launch and explosion sounds when testing animations (fireworks/bubbles).</p>
                </div>
                <div class="setting">
                    <label for="testSoundVolume" data-i18n="settings.audio.soundVolume">Sound Volume: <span id="testSoundVolumeValue">0.3</span></label>
                    <input type="range" id="testSoundVolume" min="0" max="1" step="0.05" value="0.3">
                    <p class="setting-description" data-i18n="settings.audio.soundVolumeDesc">Volume level for animation sound effects.</p>
                </div>
            </div>

            <!-- Fireworks Tab Pane -->
            <div class="tab-pane" id="fireworks-tab" data-tab-content="fireworks">
                <h4 data-i18n="settings.fireworks.title">🎆 Fireworks Settings</h4>
                
                <!-- Launch Controls Section -->
                <div class="settings-section launch-controls-section">
                    <h4 class="section-title" data-i18n="settings.fireworks.launchControls">🚀 Launch Controls</h4>
                    
                    <!-- Launch Position Settings -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.fireworks.launchPosition">🎯 Launch Position</h5>
                        
                        <div class="setting">
                            <label for="launchSpreadMode" data-i18n="settings.fireworks.positionMode">Position Mode:</label>
                            <select id="launchSpreadMode" class="setting-select">
                                <option value="center" data-i18n="settings.fireworks.centerOnly">Center Only</option>
                                <option value="range" selected data-i18n="settings.fireworks.rangeFromCenter">Range from Center</option>
                                <option value="random" data-i18n="settings.fireworks.randomAcrossScreen">Random Across Screen</option>
                            </select>
                            <p class="setting-description" data-i18n="settings.fireworks.positionModeDesc">How fireworks are positioned along the bottom of the screen</p>
                        </div>
                        
                        <div class="setting" id="launchSpreadSetting">
                            <label for="launchSpread" data-i18n="settings.fireworks.launchSpread">Launch Spread: <span id="launchSpreadValue">20</span>%</label>
                            <input type="range" id="launchSpread" min="0" max="100" step="5" value="20" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.fireworks.centerOnlyLabel">Center Only</span>
                                <span data-i18n="settings.fireworks.fullWidthLabel">Full Width</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.fireworks.launchSpreadDesc">Width of the launch zone (0% = center point, 100% = entire screen width)</p>
                        </div>
                    </div>

                    <!-- Launch Angle Settings -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.fireworks.launchAngle">📐 Launch Angle</h5>
                        
                        <div class="setting">
                            <label for="launchAngleMode" data-i18n="settings.fireworks.angleMode">Angle Mode:</label>
                            <select id="launchAngleMode" class="setting-select">
                                <option value="range" selected data-i18n="settings.fireworks.angleRange">Angle Range</option>
                                <option value="fixed" data-i18n="settings.fireworks.fixedAngle">Fixed Angle</option>
                                <option value="random" data-i18n="settings.fireworks.randomAngle">Random Angle</option>
                            </select>
                            <p class="setting-description" data-i18n="settings.fireworks.angleModeDesc">How launch angles are determined</p>
                        </div>
                        
                        <div class="setting" id="launchAngleRangeSetting">
                            <label for="launchAngleCenter" data-i18n="settings.fireworks.centerAngle">Center Angle: <span id="launchAngleCenterValue">90</span>°</label>
                            <input type="range" id="launchAngleCenter" min="45" max="135" step="5" value="90" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.fireworks.rightAngle">45° (Right)</span>
                                <span data-i18n="settings.fireworks.upAngle">90° (Up)</span>
                                <span data-i18n="settings.fireworks.leftAngle">135° (Left)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.fireworks.centerAngleDesc">The main direction fireworks will launch toward</p>
                        </div>
                        
                        <div class="setting" id="launchAngleSpreadSetting">
                            <label for="launchAngleSpread" data-i18n="settings.fireworks.angleSpread">Angle Spread: <span id="launchAngleSpreadValue">30</span>°</label>
                            <input type="range" id="launchAngleSpread" min="0" max="45" step="5" value="30" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.fireworks.preciseAngle">0° (Precise)</span>
                                <span data-i18n="settings.fireworks.wideVariety">45° (Wide Variety)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.fireworks.angleSpreadDesc">How much angles can vary from the center (±spread)</p>
                        </div>
                        
                        <div class="setting" id="launchAngleFixedSetting" style="display: none;">
                            <label for="launchAngleFixed" data-i18n="settings.fireworks.fixedAngleLabel">Fixed Angle: <span id="launchAngleFixedValue">90</span>°</label>
                            <input type="range" id="launchAngleFixed" min="45" max="165" step="5" value="90" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.fireworks.rightFixed">45° (Right)</span>
                                <span data-i18n="settings.fireworks.straightUp">90° (Straight Up)</span>
                                <span data-i18n="settings.fireworks.leftFixed">135° (Left)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.fireworks.fixedAngleDesc">Fixed launch angle for all fireworks</p>
                        </div>
                    </div>

                    <!-- Launch Power Settings -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.fireworks.launchPower">🚀 Launch Power</h5>
                        
                        <div class="setting">
                            <label for="launchHeight" data-i18n="settings.fireworks.launchPowerLabel">Launch Power: <span id="launchHeightValue">60</span>%</label>
                            <input type="range" id="launchHeight" min="10" max="100" step="5" value="60" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.fireworks.lowPower">10% (Low)</span>
                                <span data-i18n="settings.fireworks.highPower">100% (High)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.fireworks.launchPowerDesc">How high fireworks reach (10% = 10% of screen height, 100% = 90% of screen height)</p>
                        </div>
                        
                        <div class="setting toggle-setting">
                            <label for="randomLaunchPower" data-i18n="settings.fireworks.randomLaunchPower">Random Launch Power:</label>
                            <label class="switch">
                                <input type="checkbox" id="randomLaunchPower" checked>
                                <span class="slider round"></span>
                            </label>
                            <p class="setting-description" data-i18n="settings.fireworks.randomLaunchPowerDesc">Each firework will have a different random launch power for more variety.</p>
                        </div>
                        
                        <div class="setting" id="randomLaunchPowerRange" style="display: none;">
                            <label for="randomLaunchPowerMin" data-i18n="settings.fireworks.minimumPower">Minimum Power: <span id="randomLaunchPowerMinValue">30</span>%</label>
                            <input type="range" id="randomLaunchPowerMin" min="10" max="80" step="5" value="30" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.fireworks.veryLow">10% (Very Low)</span>
                                <span data-i18n="settings.fireworks.high">80% (High)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.fireworks.minimumPowerDesc">Minimum launch power for random fireworks.</p>
                        </div>
                        
                        <div class="setting" id="randomLaunchPowerMaxSetting" style="display: none;">
                            <label for="randomLaunchPowerMax" data-i18n="settings.fireworks.maximumPower">Maximum Power: <span id="randomLaunchPowerMaxValue">90</span>%</label>
                            <input type="range" id="randomLaunchPowerMax" min="20" max="100" step="5" value="90" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.fireworks.lowLabel">20% (Low)</span>
                                <span data-i18n="settings.fireworks.maximum">100% (Maximum)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.fireworks.maximumPowerDesc">Maximum launch power for random fireworks.</p>
                        </div>
                    </div>

                    <!-- Launch Presets -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.fireworks.quickPresets">⚡ Quick Presets</h5>
                        
                        <div class="setting">
                            <label for="launchPreset" data-i18n="settings.fireworks.launchPattern">Launch Pattern:</label>
                            <select id="launchPreset" class="setting-select">
                                <option value="" data-i18n="settings.fireworks.selectPreset">-- Select Preset --</option>
                                <option value="classic" data-i18n="presets.names.classic">🎆 Classic (Center, Slight Spread)</option>
                                <option value="wide-celebration" data-i18n="presets.names.wideCelebration">🎉 Wide Celebration (Full Screen)</option>
                                <option value="fountain" data-i18n="presets.names.fountain">⛲ Fountain (Center, Wide Angles)</option>
                                <option value="rocket-straight" data-i18n="presets.names.rocketStraight">🚀 Straight Rockets (Vertical Only)</option>
                                <option value="left-cascade" data-i18n="presets.names.leftCascade">↖️ Left Cascade</option>
                                <option value="right-cascade" data-i18n="presets.names.rightCascade">↗️ Right Cascade</option>
                                <option value="chaos" data-i18n="presets.names.chaos">🌪️ Chaos Mode (Random Everything)</option>
                            </select>
                            <p class="setting-description" id="presetDescription" data-i18n="settings.fireworks.presetDescription">Choose a preset to quickly configure launch settings</p>
                        </div>
                    </div>
                </div>
                
                <!-- Firework Appearance Section -->
                <div class="settings-section">
                    <h4 class="section-title" data-i18n="settings.fireworks.fireworkAppearance">✨ Firework Appearance</h4>
                    
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.fireworks.sizeSettings">📏 Size Settings</h5>
                        
                        <div class="setting">
                            <label for="fireworkSize" data-i18n="settings.fireworks.fireworkSize">Firework Size: <span id="fireworkSizeValue">1.0</span></label>
                            <input type="range" id="fireworkSize" min="0.5" max="5.0" step="0.1" value="1.0">
                            <p class="setting-description" data-i18n="settings.fireworks.fireworkSizeDesc">Controls how big fireworks and uploaded images appear during explosions.</p>
                        </div>
                        
                        <div class="setting toggle-setting">
                            <label for="randomFireworkSize" data-i18n="settings.fireworks.randomFireworkSizes">Random Firework Sizes:</label>
                            <label class="switch">
                                <input type="checkbox" id="randomFireworkSize">
                                <span class="slider round"></span>
                            </label>
                            <p class="setting-description" data-i18n="settings.fireworks.randomFireworkSizesDesc">Each firework will have a different random size for more variety.</p>
                        </div>
                        
                        <div class="setting" id="randomSizeRange" style="display: none;">
                            <label for="randomSizeMin" data-i18n="settings.fireworks.smallestSize">Smallest Size: <span id="randomSizeMinValue">0.5</span></label>
                            <input type="range" id="randomSizeMin" min="0.5" max="2.0" step="0.1" value="0.5">
                            <p class="setting-description" data-i18n="settings.fireworks.smallestSizeDesc">Minimum size for random fireworks.</p>
                        </div>
                        
                        <div class="setting" id="randomSizeMaxSetting" style="display: none;">
                            <label for="randomSizeMax" data-i18n="settings.fireworks.largestSize">Largest Size: <span id="randomSizeMaxValue">2.0</span></label>
                            <input type="range" id="randomSizeMax" min="2.0" max="5.0" step="0.1" value="2.0">
                            <p class="setting-description" data-i18n="settings.fireworks.largestSizeDesc">Maximum size for random fireworks.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Physics & Behavior Section -->
                <div class="settings-section">
                    <h4 class="section-title" data-i18n="settings.fireworks.physicsAndBehavior">⚙️ Physics & Behavior</h4>
                    
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.fireworks.physicsSettings">🌍 Physics Settings</h5>
                        
                        <div class="setting">
                            <label for="maxFireworks" data-i18n="settings.fireworks.maxFireworksOnScreen">Max Fireworks on Screen: <span id="maxFireworksValue">15</span></label>
                            <input type="range" id="maxFireworks" min="1" max="50" step="1" value="15">
                            <p class="setting-description" data-i18n="settings.fireworks.maxFireworksOnScreenDesc">Maximum number of fireworks that can be active at the same time.</p>
                        </div>
                        
                        <div class="setting">
                            <label for="fireworkGravity" data-i18n="settings.fireworks.gravityStrength">Gravity Strength: <span id="gravityValue">0.035</span></label>
                            <input type="range" id="fireworkGravity" min="0.01" max="0.2" step="0.005" value="0.035">
                            <p class="setting-description" data-i18n="settings.fireworks.gravityStrengthDesc">How quickly fireworks fall back down (higher = faster falling).</p>
                        </div>
                        
                        <div class="setting">
                            <label for="smokeTrailIntensity" data-i18n="settings.fireworks.smokeTrail">Smoke Trail: <span id="smokeTrailValue">0.3</span></label>
                            <input type="range" id="smokeTrailIntensity" min="0" max="1" step="0.05" value="0.3">
                            <p class="setting-description" data-i18n="settings.fireworks.smokeTrailDesc">Intensity of the smoke trail behind rising fireworks.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bubbles Tab Pane -->
            <div class="tab-pane" id="bubbles-tab" data-tab-content="bubbles">
                <h4 data-i18n="settings.bubbles.title">🫧 Bubble Settings</h4>
                
                <!-- Launch Controls Section -->
                <div class="settings-section launch-controls-section">
                    <h4 class="section-title" data-i18n="settings.bubbles.launchControls">🚀 Launch Controls</h4>
                    
                    <!-- Launch Position Settings -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.launchPosition">🎯 Launch Position</h5>
                        
                        <div class="setting">
                            <label for="bubbleLaunchSpreadMode" data-i18n="settings.bubbles.positionMode">Position Mode:</label>
                            <select id="bubbleLaunchSpreadMode" class="setting-select">
                                <option value="center" data-i18n="settings.bubbles.centerOnly">Center Only</option>
                                <option value="range" selected data-i18n="settings.bubbles.rangeFromCenter">Range from Center</option>
                                <option value="random" data-i18n="settings.bubbles.randomAcrossScreen">Random Across Screen</option>
                            </select>
                            <p class="setting-description" data-i18n="settings.bubbles.positionModeDesc">How bubbles are positioned along the bottom of the screen</p>
                        </div>
                        
                        <div class="setting" id="bubbleLaunchSpreadSetting">
                            <label for="bubbleLaunchSpread" data-i18n="settings.bubbles.launchSpread">Launch Spread: <span id="bubbleLaunchSpreadValue">30</span>%</label>
                            <input type="range" id="bubbleLaunchSpread" min="0" max="100" step="5" value="30" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.centerOnlyLabel">Center Only</span>
                                <span data-i18n="settings.bubbles.fullWidthLabel">Full Width</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.launchSpreadDesc">Width of the launch zone (0% = center point, 100% = entire screen width)</p>
                        </div>
                    </div>

                    <!-- Cluster Settings -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.clusterSettings">🫧 Cluster Settings</h5>
                        
                        <div class="setting">
                            <label for="bubbleClusterSize" data-i18n="settings.bubbles.bubblesPerLaunch">Bubbles per Launch: <span id="bubbleClusterSizeValue">2</span></label>
                            <input type="range" id="bubbleClusterSize" min="0" max="8" step="1" value="2" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.noneCluster">0 (None)</span>
                                <span data-i18n="settings.bubbles.largeCluster">8 (Large Cluster)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.bubblesPerLaunchDesc">Number of bubbles created each time you launch</p>
                        </div>
                        
                        <div class="setting toggle-setting">
                            <label for="randomBubbleClusterSize" data-i18n="settings.bubbles.randomBubblesPerLaunch">Random Bubbles per Launch:</label>
                            <label class="switch">
                                <input type="checkbox" id="randomBubbleClusterSize">
                                <span class="slider round"></span>
                            </label>
                            <p class="setting-description" data-i18n="settings.bubbles.randomBubblesPerLaunchDesc">Each launch will create a random number of bubbles for more variety.</p>
                        </div>
                        
                        <div class="setting" id="randomClusterSizeRange" style="display: none;">
                            <label for="randomClusterSizeMin" data-i18n="settings.bubbles.minimumBubbles">Minimum Bubbles: <span id="randomClusterSizeMinValue">1</span></label>
                            <input type="range" id="randomClusterSizeMin" min="1" max="5" step="1" value="1" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.singleBubble">1 (Single)</span>
                                <span data-i18n="settings.bubbles.mediumCluster">5 (Medium)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.minimumBubblesDesc">Minimum number of bubbles per launch.</p>
                        </div>
                        
                        <div class="setting" id="randomClusterSizeMaxSetting" style="display: none;">
                            <label for="randomClusterSizeMax" data-i18n="settings.bubbles.maximumBubbles">Maximum Bubbles: <span id="randomClusterSizeMaxValue">6</span></label>
                            <input type="range" id="randomClusterSizeMax" min="3" max="8" step="1" value="6" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.smallCluster">3 (Small)</span>
                                <span data-i18n="settings.bubbles.largeClusterMax">8 (Large Cluster)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.maximumBubblesDesc">Maximum number of bubbles per launch.</p>
                        </div>
                        
                        <div class="setting">
                            <label for="bubbleClusterSpread" data-i18n="settings.bubbles.clusterSpread">Cluster Spread: <span id="bubbleClusterSpreadValue">20</span>px</label>
                            <input type="range" id="bubbleClusterSpread" min="5" max="100" step="5" value="20" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.tightCluster">5px (Tight)</span>
                                <span data-i18n="settings.bubbles.wideCluster">100px (Wide)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.clusterSpreadDesc">How spread out bubbles are within each cluster</p>
                        </div>
                    </div>

                    <!-- Rise Speed Settings -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.riseSpeed">⬆️ Rise Speed</h5>
                        
                        <div class="setting">
                            <label for="bubbleRiseSpeed" data-i18n="settings.bubbles.baseRiseSpeed">Base Rise Speed: <span id="bubbleRiseSpeedValue">2.0</span></label>
                            <input type="range" id="bubbleRiseSpeed" min="0.5" max="5.0" step="0.1" value="2.0" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.slowFloat">0.5 (Slow Float)</span>
                                <span data-i18n="settings.bubbles.fastRise">5.0 (Fast Rise)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.baseRiseSpeedDesc">Base speed at which bubbles float upward</p>
                        </div>
                        
                        <div class="setting toggle-setting">
                            <label for="randomBubbleRiseSpeed" data-i18n="settings.bubbles.randomRiseSpeeds">Random Rise Speeds:</label>
                            <label class="switch">
                                <input type="checkbox" id="randomBubbleRiseSpeed">
                                <span class="slider round"></span>
                            </label>
                            <p class="setting-description" data-i18n="settings.bubbles.randomRiseSpeedsDesc">Each bubble will have a different random rise speed for more variety.</p>
                        </div>
                        
                        <div class="setting" id="randomRiseSpeedRange" style="display: none;">
                            <label for="randomRiseSpeedMin" data-i18n="settings.bubbles.minimumSpeed">Minimum Speed: <span id="randomRiseSpeedMinValue">1.0</span></label>
                            <input type="range" id="randomRiseSpeedMin" min="0.5" max="3.0" step="0.1" value="1.0" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.verySlow">0.5 (Very Slow)</span>
                                <span data-i18n="settings.bubbles.fastSpeed">3.0 (Fast)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.minimumSpeedDesc">Minimum rise speed for random bubbles.</p>
                        </div>
                        
                        <div class="setting" id="randomRiseSpeedMaxSetting" style="display: none;">
                            <label for="randomRiseSpeedMax" data-i18n="settings.bubbles.maximumSpeed">Maximum Speed: <span id="randomRiseSpeedMaxValue">4.0</span></label>
                            <input type="range" id="randomRiseSpeedMax" min="2.0" max="5.0" step="0.1" value="4.0" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.moderateSpeed">2.0 (Moderate)</span>
                                <span data-i18n="settings.bubbles.veryFastSpeed">5.0 (Very Fast)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.maximumSpeedDesc">Maximum rise speed for random bubbles.</p>
                        </div>
                    </div>

                    <!-- Quick Presets -->
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.quickPresets">⚡ Quick Presets</h5>
                        
                        <div class="setting">
                            <label for="bubblePreset" data-i18n="settings.bubbles.bubblePattern">Bubble Pattern:</label>
                            <select id="bubblePreset" class="setting-select">
                                <option value="" data-i18n="settings.bubbles.selectPreset">-- Select Preset --</option>
                                <option value="gentle" data-i18n="presets.names.gentle">🫧 Gentle (Small Clusters, Slow Rise)</option>
                                <option value="celebration" data-i18n="presets.names.celebration">🎉 Celebration (Large Clusters, Fast Rise)</option>
                                <option value="fountain" data-i18n="presets.names.fountainBubbles">⛲ Fountain (Center, Many Bubbles)</option>
                                <option value="stream" data-i18n="presets.names.stream">🌊 Stream (Single Line, Steady)</option>
                                <option value="chaos" data-i18n="presets.names.chaosBubbles">🌪️ Chaos Mode (Random Everything)</option>
                                <option value="peaceful" data-i18n="presets.names.peaceful">🕊️ Peaceful (Slow, Spread Out)</option>
                                <option value="party" data-i18n="presets.names.party">🎊 Party (Fast, Everywhere)</option>
                            </select>
                            <p class="setting-description" id="bubblePresetDescription" data-i18n="settings.bubbles.presetDescription">Choose a preset to quickly configure bubble settings</p>
                        </div>
                    </div>
                </div>
                
                <!-- Bubble Appearance Section -->
                <div class="settings-section">
                    <h4 class="section-title" data-i18n="settings.bubbles.bubbleAppearance">✨ Bubble Appearance</h4>
                    
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.sizeSettings">📏 Size Settings</h5>
                        
                        <div class="setting">
                            <label for="bubbleSize" data-i18n="settings.bubbles.bubbleSize">Bubble Size: <span id="bubbleSizeValue">1.0</span></label>
                            <input type="range" id="bubbleSize" min="0.5" max="3.0" step="0.1" value="1.0">
                            <p class="setting-description" data-i18n="settings.bubbles.bubbleSizeDesc">Controls how big bubbles and uploaded images appear during pops.</p>
                        </div>
                        
                        <div class="setting toggle-setting">
                            <label for="randomBubbleSize" data-i18n="settings.bubbles.randomBubbleSizes">Random Bubble Sizes:</label>
                            <label class="switch">
                                <input type="checkbox" id="randomBubbleSize">
                                <span class="slider round"></span>
                            </label>
                            <p class="setting-description" data-i18n="settings.bubbles.randomBubbleSizesDesc">Each bubble will have a different random size for more variety.</p>
                        </div>
                        
                        <div class="setting" id="randomBubbleSizeRange" style="display: none;">
                            <label for="randomBubbleSizeMin" data-i18n="settings.bubbles.smallestBubbleSize">Smallest Size: <span id="randomBubbleSizeMinValue">0.5</span></label>
                            <input type="range" id="randomBubbleSizeMin" min="0.5" max="2.0" step="0.1" value="0.5">
                            <p class="setting-description" data-i18n="settings.bubbles.smallestBubbleSizeDesc">Minimum size for random bubbles.</p>
                        </div>
                        
                        <div class="setting" id="randomBubbleSizeMaxSetting" style="display: none;">
                            <label for="randomBubbleSizeMax" data-i18n="settings.bubbles.largestBubbleSize">Largest Size: <span id="randomBubbleSizeMaxValue">2.0</span></label>
                            <input type="range" id="randomBubbleSizeMax" min="2.0" max="5.0" step="0.1" value="2.0">
                            <p class="setting-description" data-i18n="settings.bubbles.largestBubbleSizeDesc">Maximum size for random bubbles.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Pop Behavior Section -->
                <div class="settings-section">
                    <h4 class="section-title" data-i18n="settings.bubbles.popBehavior">💥 Pop Behavior</h4>
                    
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.testBubblePopHeightSettings">🎯 Test Bubble Pop Height Settings</h5>
                        
                        <div class="setting">
                            <label for="bubbleAutoPopHeight" data-i18n="settings.bubbles.testBubbleAutoPopHeight">Test Bubble Auto-Pop Height: <span id="bubbleAutoPopHeightValue">85</span>%</label>
                            <input type="range" id="bubbleAutoPopHeight" min="10" max="100" step="5" value="85" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.lowInSky">10% (Low in Sky)</span>
                                <span data-i18n="settings.bubbles.highInSky">100% (High in Sky)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.testBubbleAutoPopHeightDesc">Height where TEST BUBBLES automatically pop (10% = low in sky, 100% = high in sky)</p>
                        </div>
                        
                        <div class="setting toggle-setting">
                            <label for="randomBubblePopHeight" data-i18n="settings.bubbles.randomTestBubblePopHeights">Random Test Bubble Pop Heights:</label>
                            <label class="switch">
                                <input type="checkbox" id="randomBubblePopHeight">
                                <span class="slider round"></span>
                            </label>
                            <p class="setting-description" data-i18n="settings.bubbles.randomTestBubblePopHeightsDesc">Each test bubble will pop at a different random height for more variety.</p>
                        </div>
                        
                        <div class="setting" id="randomPopHeightRange" style="display: none;">
                            <label for="randomPopHeightMin" data-i18n="settings.bubbles.minimumPopHeight">Minimum Pop Height: <span id="randomPopHeightMinValue">70</span>%</label>
                            <input type="range" id="randomPopHeightMin" min="10" max="80" step="5" value="70" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.lowPop">10% (Low)</span>
                                <span data-i18n="settings.bubbles.highPop">80% (High)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.minimumPopHeightDesc">Minimum pop height for random test bubbles (lower = closer to ground).</p>
                        </div>
                        
                        <div class="setting" id="randomPopHeightMaxSetting" style="display: none;">
                            <label for="randomPopHeightMax" data-i18n="settings.bubbles.maximumPopHeight">Maximum Pop Height: <span id="randomPopHeightMaxValue">100</span>%</label>
                            <input type="range" id="randomPopHeightMax" min="30" max="100" step="5" value="100" class="setting-slider">
                            <div class="range-labels">
                                <span data-i18n="settings.bubbles.moderatePop">30% (Moderate)</span>
                                <span data-i18n="settings.bubbles.veryHighPop">100% (Very High)</span>
                            </div>
                            <p class="setting-description" data-i18n="settings.bubbles.maximumPopHeightDesc">Maximum pop height for random test bubbles (higher = closer to top).</p>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.popSettings">⚙️ Pop Settings</h5>
                        
                        <div class="setting">
                            <label for="maxBubbles" data-i18n="settings.bubbles.maxBubblesOnScreen">Max Bubbles on Screen: <span id="maxBubblesValue">15</span></label>
                            <input type="range" id="maxBubbles" min="5" max="50" step="1" value="15">
                            <p class="setting-description" data-i18n="settings.bubbles.maxBubblesOnScreenDesc">Maximum number of bubbles that can be active at the same time.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Physics & Behavior Section -->
                <div class="settings-section">
                    <h4 class="section-title" data-i18n="settings.bubbles.physicsAndBehavior">⚙️ Physics & Behavior</h4>
                    
                    <div class="setting-group">
                        <h5 class="group-title" data-i18n="settings.bubbles.physicsSettings">🌍 Physics Settings</h5>
                        
                        <div class="setting">
                            <label for="bubbleGravity" data-i18n="settings.bubbles.bubbleGravity">Bubble Gravity: <span id="bubbleGravityValue">0.015</span></label>
                            <input type="range" id="bubbleGravity" min="0.005" max="0.05" step="0.005" value="0.015">
                            <p class="setting-description" data-i18n="settings.bubbles.bubbleGravityDesc">How much gravity affects bubbles (higher = fall faster).</p>
                        </div>
                        
                        <div class="setting">
                            <label for="bubbleWobble" data-i18n="settings.bubbles.wobbleIntensity">Wobble Intensity: <span id="bubbleWobbleValue">1.0</span></label>
                            <input type="range" id="bubbleWobble" min="0" max="3.0" step="0.1" value="1.0">
                            <p class="setting-description" data-i18n="settings.bubbles.wobbleIntensityDesc">How much bubbles wobble as they float (0 = straight up).</p>
                        </div>
                        
                        <div class="setting">
                            <label for="bubbleBuoyancy" data-i18n="settings.bubbles.buoyancy">Buoyancy: <span id="bubbleBuoyancyValue">0.98</span></label>
                            <input type="range" id="bubbleBuoyancy" min="0.9" max="1.0" step="0.01" value="0.98">
                            <p class="setting-description" data-i18n="settings.bubbles.buoyancyDesc">How well bubbles resist gravity (higher = float better).</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visual Effects Tab Pane -->
            <div class="tab-pane" id="effects-tab" data-tab-content="effects">
                <h4 data-i18n="settings.effects.title">✨ Visual Effects Settings</h4>
                <div class="setting">
                    <label for="globalSpeed" data-i18n="settings.effects.animationSpeed">Animation Speed: <span id="globalSpeedValue">1</span></label>
                    <input type="range" id="globalSpeed" min="0.1" max="2" step="0.1" value="1">
                    <p class="setting-description" data-i18n="settings.effects.animationSpeedDesc">Overall speed of all animations (higher = faster, lower = slower motion).</p>
                </div>
                <div class="setting">
                    <label for="particleCount" data-i18n="settings.effects.explosionParticles">Explosion Particles: <span id="particleCountValue">100</span></label>
                    <input type="range" id="particleCount" min="10" max="500" step="10" value="100">
                    <p class="setting-description" data-i18n="settings.effects.explosionParticlesDesc">Number of sparkly particles created when fireworks explode.</p>
                </div>
                <div class="setting">
                    <label for="particleLifespan" data-i18n="settings.effects.particleDuration">Particle Duration: <span id="particleLifespanValue">60</span> frames</label>
                    <input type="range" id="particleLifespan" min="20" max="200" step="5" value="60">
                    <p class="setting-description" data-i18n="settings.effects.particleDurationDesc">How long explosion particles stay visible before fading away.</p>
                </div>
                <div class="setting">
                    <label for="particleMinSize" data-i18n="settings.effects.smallestParticles">Smallest Particles: <span id="particleMinSizeValue">1</span></label>
                    <input type="range" id="particleMinSize" min="0.5" max="5" step="0.1" value="1">
                    <p class="setting-description" data-i18n="settings.effects.smallestParticlesDesc">Minimum size of individual explosion particles.</p>
                </div>
                <div class="setting">
                    <label for="particleMaxSize" data-i18n="settings.effects.largestParticles">Largest Particles: <span id="particleMaxSizeValue">3</span></label>
                    <input type="range" id="particleMaxSize" min="1" max="10" step="0.1" value="3">
                    <p class="setting-description" data-i18n="settings.effects.largestParticlesDesc">Maximum size of individual explosion particles.</p>
                </div>
                <div class="setting toggle-setting">
                    <label for="useMultiColor" data-i18n="settings.effects.colorfulParticles">Colorful Particles:</label>
                    <label class="switch">
                         <input type="checkbox" id="useMultiColor">
                         <span class="slider round"></span>
                    </label>
                    <p class="setting-description" data-i18n="settings.effects.colorfulParticlesDesc">Use multiple colors for particles instead of single-color explosions.</p>
                </div>
                <div class="setting toggle-setting">
                    <label for="glowEffect" data-i18n="settings.effects.glowEffect">Glow Effect:</label>
                    <label class="switch">
                        <input type="checkbox" id="glowEffect">
                        <span class="slider round"></span>
                    </label>
                    <p class="setting-description" data-i18n="settings.effects.glowEffectDesc">Adds a beautiful glowing aura around fireworks and particles.</p>
                </div>
                <div class="setting">
                    <label for="fadeResistance" data-i18n="settings.effects.particleFadeSpeed">Particle Fade Speed: <span id="fadeResistanceValue">0.95</span></label>
                    <input type="range" id="fadeResistance" min="0.8" max="0.99" step="0.01" value="0.95">
                    <p class="setting-description" data-i18n="settings.effects.particleFadeSpeedDesc">How quickly particles fade away (higher = slower fading, longer lasting).</p>
                </div>
            </div>

            <!-- Images Tab Pane -->
            <div class="tab-pane" id="images-tab" data-tab-content="images">
                <h4 data-i18n="settings.images.title">🖼️ Image & Video Settings</h4>
                <div class="setting toggle-setting">
                    <label for="backgroundRemovalEnabled" data-i18n="settings.images.autoRemoveBackgrounds">Auto Remove Backgrounds:</label>
                    <label class="switch">
                        <input type="checkbox" id="backgroundRemovalEnabled" checked>
                        <span class="slider round"></span>
                    </label>
                    <p class="setting-description" data-i18n="settings.images.autoRemoveBackgroundsDesc">Automatically remove white/solid backgrounds from uploaded firework images.</p>
                </div>
                <div class="setting toggle-setting">
                    <label for="imageRotation" data-i18n="settings.images.spinningImages">Spinning Images:</label>
                    <label class="switch">
                        <input type="checkbox" id="imageRotation">
                        <span class="slider round"></span>
                    </label>
                    <p class="setting-description" data-i18n="settings.images.spinningImagesDesc">Make uploaded images spin and rotate during firework explosions.</p>
                </div>
                <div class="setting">
                    <label for="imageGravity" data-i18n="settings.images.imageGravity">Image Gravity: <span id="imageGravityValue">1.0</span></label>
                    <input type="range" id="imageGravity" min="0" max="3" step="0.1" value="1.0">
                    <p class="setting-description" data-i18n="settings.images.imageGravityDesc">How fast images fall after exploding (0 = float forever, higher = fall faster).</p>
                </div>
                
                <!-- Background Images & Videos Section -->
                <h5 data-i18n="settings.images.backgroundSection">📺 Background Images & Videos</h5>
                <div class="setting">
                    <label for="bgOpacity" data-i18n="settings.images.backgroundImageOpacity">Background Opacity: <span id="bgOpacityValue">0.8</span></label>
                    <input type="range" id="bgOpacity" min="0" max="1" step="0.05" value="0.8">
                    <p class="setting-description" data-i18n="settings.images.backgroundImageOpacityDesc">How see-through the background images and videos are (0 = invisible, 1 = solid).</p>
                </div>
                <div class="setting">
                    <label for="bgTransitionTime" data-i18n="settings.images.backgroundTransition">Background Transition: <span id="bgTransitionValue">2</span> sec</label>
                    <input type="range" id="bgTransitionTime" min="0.5" max="5" step="0.5" value="2">
                    <p class="setting-description" data-i18n="settings.images.backgroundTransitionDesc">How long it takes for background media to fade from one to the next.</p>
                </div>
                <div class="setting">
                    <label for="bgDisplayTime" data-i18n="settings.images.backgroundDuration">Background Duration: <span id="bgDisplayValue">5</span> sec</label>
                    <input type="range" id="bgDisplayTime" min="2" max="20" step="1" value="5">
                    <p class="setting-description" data-i18n="settings.images.backgroundDurationDesc">How long each background image or video is shown before changing to the next.</p>
                </div>
                
                <!-- Video Specific Settings -->
                <h6 data-i18n="settings.images.videoSettings">🎬 Video Settings</h6>
                <div class="setting toggle-setting">
                    <label for="videoFullDuration" data-i18n="settings.images.videoFullDuration">Play Full Video Duration:</label>
                    <label class="switch">
                        <input type="checkbox" id="videoFullDuration" checked>
                        <span class="slider round"></span>
                    </label>
                    <p class="setting-description" data-i18n="settings.images.videoFullDurationDesc">When enabled, videos play their complete duration before transitioning. When disabled, videos use the Background Duration setting like images.</p>
                </div>
                <div class="setting toggle-setting">
                    <label for="videoLoop" data-i18n="settings.images.videoLoop">Loop Videos:</label>
                    <label class="switch">
                        <input type="checkbox" id="videoLoop" checked>
                        <span class="slider round"></span>
                    </label>
                    <p class="setting-description" data-i18n="settings.images.videoLoopDesc">Automatically restart videos when they reach the end (only applies when there's only one video or when Full Duration is disabled).</p>
                </div>
                <div class="setting">
                    <label for="videoVolume" data-i18n="settings.images.videoVolume">Video Volume: <span id="videoVolumeValue">0.0</span></label>
                    <input type="range" id="videoVolume" min="0" max="1" step="0.05" value="0">
                    <p class="setting-description" data-i18n="settings.images.videoVolumeDesc">Volume level for background videos (kept at 0 to avoid conflicts with microphone).</p>
                </div>
            </div>
            <div class="tab-pane" id="colors-tab" data-tab-content="colors">
                <h4 data-i18n="settings.colors.title">🎨 Colors & Themes</h4>
                <div class="setting">
                    <label for="colorTheme" data-i18n="settings.colors.colorTheme">Color Theme:</label>
                    <select id="colorTheme">
                        <option value="Vivid" selected data-i18n="settings.colors.vivid">🌈 Vivid (Bright & Bold)</option>
                        <option value="Pastel" data-i18n="settings.colors.pastel">🌸 Pastel (Soft & Gentle)</option>
                        <option value="Neon" data-i18n="settings.colors.neon">⚡ Neon (Electric & Glowing)</option>
                        <option value="Earthy" data-i18n="settings.colors.earthy">🍂 Earthy (Natural & Warm)</option>
                        <option value="Monochrome" data-i18n="settings.colors.monochrome">⚫ Monochrome (Black & White)</option>
                        <option value="Custom" data-i18n="settings.colors.custom">🎨 Custom (Your Own Colors)</option>
                    </select>
                    <p class="setting-description" data-i18n="settings.colors.colorThemeDesc">Choose a color style for your fireworks and particles.</p>
                </div>
                <div class="setting">
                    <label for="colorIntensity" data-i18n="settings.colors.colorIntensity">Color Intensity: <span id="colorIntensityValue">1</span></label>
                    <input type="range" id="colorIntensity" min="0.1" max="2" step="0.1" value="1">
                    <p class="setting-description" data-i18n="settings.colors.colorIntensityDesc">Adjusts the overall vividness of colors.</p>
                </div>
                <div class="setting" id="customColorsSetting" style="display: none;">
                    <h5 data-i18n="settings.colors.customColors">Custom Colors</h5>
                    <div class="color-picker-container">
                        <input type="color" id="colorPicker" value="#ff0000">
                        <button id="addColor" class="button" data-i18n="settings.colors.addColor">Add Color</button>
                    </div>
                    <p class="setting-description" data-i18n="settings.colors.customColorsDesc">Click a swatch to remove it.</p>
                    <div id="customColorsList" class="custom-colors-list">
                        <!-- Custom color swatches will be added here by JavaScript -->
                    </div>
                </div>
            </div>

        </div>
        
        <!-- Control Buttons -->
        <div class="settings-controls">
            <button id="resetSettings" class="settings-btn">
                <span class="icon">↺</span>
                <span class="text" data-i18n="ui.buttons.reset">Reset</span>
            </button>
            <button id="closeSettings" class="settings-btn">
                <span class="icon">✓</span>
                <span class="text" data-i18n="ui.buttons.close">Close Settings</span>
            </button>
        </div>
    </div>

    <!-- Tab and button click fixes -->
    
    <!-- 🌍 Internationalization System -->
    <script type="module" src="translations/i18n.js"></script>
    
    <!-- Language Switcher UI -->
    <script src="js/ui/LanguageSwitcher.js"></script>
    
    <!-- Original scripts -->
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/uploaders/direct-image-uploader.js"></script>
    <script type="module" src="js/uploaders/direct-background-uploader.js"></script>
    <script type="module" src="js/managers/ClearManager.js"></script>
    <script type="module" src="js/managers/PresetManager.js"></script>
    <script type="module" src="js/ui/PresetUI.js"></script>
    <script src="js/ui/tab-switcher.js"></script>
    <script src="js/ui/settings-swatch-fix.js"></script>
    <script src="js/ui/mode-toggle-dropdown.js"></script>
    
    <script>
        // Direct button handlers
        document.addEventListener('DOMContentLoaded', function() {
            const selectFilesBtn = document.getElementById('selectFiles');
            const fileInput = document.getElementById('fileInput');
            
            if (selectFilesBtn && fileInput) {
                selectFilesBtn.onclick = function() {
                    fileInput.click();
                };
            }
            
            const selectBgFilesBtn = document.getElementById('selectBgFiles');
            const bgFileInput = document.getElementById('bgFileInput');
            
            if (selectBgFilesBtn && bgFileInput) {
                selectBgFilesBtn.onclick = function() {
                    bgFileInput.click();
                };
            }
        });
    </script>
</body>
</html>